<!DOCTYPE html>
<html lang="cn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Morris</title>
  <link rel="stylesheet" href="/css/style.css">
  
  <link rel="alternate" href="/atom.xml" title="Morris" type="application/atom+xml">
  
  <style>
    :root {
      --container-width: 1580px;
    }
  </style>
<meta name="generator" content="Hexo 7.3.0"></head>
<body class="header-fixed">
  <header class="header">
  <div class="header-inner">
    <div class="header-logo">
      <a href="/" style="color: #fff; text-decoration: none; display: flex; align-items: center;">
        
          <svg height="32" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="32" data-view-component="true" style="fill: white; margin-right: 8px;">
              <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
          </svg>
        
        <span>GitHub</span>
      </a>
    </div>
    <div class="header-nav">
       <!-- Global Nav if needed -->
    </div>
  </div>
</header>

  
  <div class="container">
    <aside class="sidebar">
  <div class="profile-info">
    <img src="/images/img.jpg" alt="Avatar" class="avatar-img">
    <div class="profile-name">lovelxh95</div>
    <div class="profile-bio">分享生活和技术</div>
    
    <ul class="profile-details">
      
      <li>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-location">
            <path fill-rule="evenodd" d="M11.536 3.464a5 5 0 00-7.072 0 5 5 0 000 7.072L8 14.07l3.536-3.534a5 5 0 000-7.072zM8 2a6 6 0 100 12 6 6 0 000-12z"></path><path fill-rule="evenodd" d="M8 9a2 2 0 100-4 2 2 0 000 4z"></path>
        </svg>
        Guangzhou, China
      </li>
      
      
      <li>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-mail">
            <path fill-rule="evenodd" d="M1.75 2A1.75 1.75 0 000 3.75v.736a.75.75 0 000 .027v7.737C0 13.216.784 14 1.75 14h12.5A1.75 1.75 0 0016 12.25v-8.5A1.75 1.75 0 0014.25 2H1.75zM14.5 4.07v-.32a.25.25 0 00-.25-.25H1.75a.25.25 0 00-.25.25v.32L8 7.88l6.5-3.81zm-13 1.07v7.11c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25V5.14L8 8.75l-6.5-3.61z"></path>
        </svg>
        <a href="mailto:blog@codewith.top">blog@codewith.top</a>
      </li>
      
      
      <li>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-mark-github">
            <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
        </svg>
        <a target="_blank" rel="noopener" href="https://github.com/lovelxh95">GitHub</a>
      </li>
      
    </ul>
  </div>
</aside>

    
    <main class="main-content">
      <div class="tab-nav">
  <div class="tab-nav-inner">
    
      <a class="tab-item " href="/">
        
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-book"><path fill-rule="evenodd" d="M0 1.75A.75.75 0 01.75 1h4.253c1.227 0 2.317.59 3 1.501A3.744 3.744 0 0111.006 1h4.245a.75.75 0 01.75.75v10.5a.75.75 0 01-.75.75h-4.507a2.25 2.25 0 00-1.591.659l-.622.621a.75.75 0 01-1.06 0l-.622-.621A2.25 2.25 0 005.255 13H.75a.75.75 0 01-.75-.75V1.75zm1.5 0v10.5h3.755c.535 0 1.05.19 1.46.54l.79.79.79-.79a2.25 2.25 0 011.46-.54h3.755V1.75h-3.755a2.25 2.25 0 00-1.748 3.518l-1.353 1.354a.75.75 0 01-1.06 0L3.498 5.268A2.25 2.25 0 001.75 1.75z"></path></svg>
        
        <span>Overview</span>
      </a>
    
      <a class="tab-item " href="/archives">
        
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path></svg>
        
        <span>Repositories</span>
      </a>
    
      <a class="tab-item " href="/categories">
        
           <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-project"><path fill-rule="evenodd" d="M1.75 0A1.75 1.75 0 000 1.75v12.5C0 15.216.784 16 1.75 16h12.5A1.75 1.75 0 0016 14.25V1.75A1.75 1.75 0 0014.25 0H1.75zM1.5 1.75a.25.25 0 01.25-.25h12.5a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25V1.75zM11.75 3a.75.75 0 00-.75.75v7.5a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75zm-8.25.75a.75.75 0 011.5 0v5.5a.75.75 0 01-1.5 0v-5.5zM8 3a.75.75 0 00-.75.75v3.5a.75.75 0 001.5 0v-3.5A.75.75 0 008 3z"></path></svg>
        
        <span>Projects</span>
      </a>
    
      <a class="tab-item " href="/tags">
        
        <span>Stars</span>
      </a>
    
      <a class="tab-item " href="/about">
        
        <span>About</span>
      </a>
    
  </div>
</div>

      <div class="post-layout-wrapper">
  <div class="post-content-container">
    <div class="post-header">
      <h1 style="margin: 0; font-size: 20px; font-weight: 600;">Cache替换算法</h1>
      <div class="post-meta" style="margin-top: 8px; font-size: 13px; color: #57606a;">
        <span>2025-09-03</span>
        
          <span style="margin: 0 8px;">•</span>
          <a class="post-category-link" href="/categories/408/">408</a>
        
        
        
          <span style="margin: 0 8px;">•</span>
          
            <a class="tag-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">
              #计算机组成原理
            </a>
          
        
      </div>
    </div>
    
    <div class="post-body">
      <div class="post-content">
        <h3 id="替换算法汇总"><a href="#替换算法汇总" class="headerlink" title="替换算法汇总"></a>替换算法汇总</h3><table>
<thead>
<tr>
<th>算法</th>
<th>英文全称</th>
<th>原理</th>
<th>优点</th>
<th>缺点</th>
<th>适用场景</th>
</tr>
</thead>
<tbody><tr>
<td><strong>随机算法</strong></td>
<td>Random Replacement</td>
<td>随机选择一个 Cache 块替换</td>
<td>实现简单，硬件开销小</td>
<td>未考虑访问模式，命中率低</td>
<td>对性能要求不高，硬件资源有限的场景</td>
</tr>
<tr>
<td><strong>先进先出算法</strong></td>
<td>FIFO（First In First Out）</td>
<td>替换最早进入 Cache 的块</td>
<td>实现简单，硬件开销小</td>
<td>未考虑数据访问频率，可能替换热点数据</td>
<td>嵌入式系统、简单处理器</td>
</tr>
<tr>
<td><strong>最近最少使用算法</strong></td>
<td>LRU（Least Recently Used）</td>
<td>替换最近最久未使用的块</td>
<td>较好地利用时间局部性，命中率高</td>
<td>实现较复杂，需要额外硬件支持</td>
<td>通用处理器、对性能要求高的场景</td>
</tr>
<tr>
<td><strong>最不经常使用算法</strong></td>
<td>LFU（Least Frequently Used）</td>
<td>替换访问次数最少的块</td>
<td>适合访问频率差异大的场景</td>
<td>对访问模式变化不敏感，实现复杂</td>
<td>特定应用场景，如数据库缓存</td>
</tr>
</tbody></table>
<h3 id="为什么需要-Cache-替换算法？"><a href="#为什么需要-Cache-替换算法？" class="headerlink" title="为什么需要 Cache 替换算法？"></a>为什么需要 Cache 替换算法？</h3><p><strong>Cache（高速缓存）<strong>是一种容量小但速度极快的存储器，位于 CPU 和主内存之间。它的作用是存放主内存中最常被访问的数据的一个副本。当 CPU 需要数据时，它首先检查 Cache。如果数据在 Cache 中（称为</strong>命中, Hit</strong>），CPU 就可以快速获取；如果不在（称为<strong>未命中, Miss</strong>），CPU 就需要从慢速的主内存中读取数据，并将其加载到 Cache 中。</p>
<p>由于 Cache 的容量远小于主内存，它很快就会被填满。当 Cache 已满，且 CPU 需要加载新的数据时，就必须选择一个已有的数据块（Cache Line）将其丢弃，以便为新数据腾出空间。<strong>Cache 替换算法</strong>就是用来决定“应该丢弃哪个数据块”的策略。一个好的替换算法能够尽可能保留未来最可能被用到的数据，从而提高 Cache 的命中率，提升系统整体性能。</p>
<h3 id="1-先进先出算法-First-In-First-Out-FIFO"><a href="#1-先进先出算法-First-In-First-Out-FIFO" class="headerlink" title="1. 先进先出算法 (First-In, First-Out, FIFO)"></a>1. 先进先出算法 (First-In, First-Out, FIFO)</h3><h4 id="算法讲解"><a href="#算法讲解" class="headerlink" title="算法讲解"></a>算法讲解</h4><p>FIFO 是最简单的替换算法。它将 Cache 中的数据块视为一个队列。当需要替换时，它会选择<strong>最早进入 Cache 的数据块</strong>进行替换，无论这个数据块最近是否被访问过。</p>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>假设我们的 Cache 有 3 个槽位（Cache Size &#x3D; 3），我们依次请求以下页面序列：</p>
<p>7, 0, 1, 2, 0, 3, 0, 4</p>
<table>
<thead>
<tr>
<th>请求页面</th>
<th>Cache 状态 (从老到新)</th>
<th>操作</th>
</tr>
</thead>
<tbody><tr>
<td><strong>7</strong></td>
<td><code>[7]</code></td>
<td>Miss, 7 进入</td>
</tr>
<tr>
<td><strong>0</strong></td>
<td><code>[7, 0]</code></td>
<td>Miss, 0 进入</td>
</tr>
<tr>
<td><strong>1</strong></td>
<td><code>[7, 0, 1]</code></td>
<td>Miss, 1 进入 (Cache 已满)</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td><code>[0, 1, 2]</code></td>
<td>Miss, 替换最早进入的<strong>7</strong></td>
</tr>
<tr>
<td><strong>0</strong></td>
<td><code>[0, 1, 2]</code></td>
<td><strong>Hit</strong></td>
</tr>
<tr>
<td><strong>3</strong></td>
<td><code>[1, 2, 3]</code></td>
<td>Miss, 替换最早进入的<strong>0</strong></td>
</tr>
<tr>
<td><strong>0</strong></td>
<td><code>[2, 3, 0]</code></td>
<td>Miss, 替换最早进入的<strong>1</strong></td>
</tr>
<tr>
<td><strong>4</strong></td>
<td><code>[3, 0, 4]</code></td>
<td>Miss, 替换最早进入的<strong>2</strong></td>
</tr>
</tbody></table>
<p>在这个例子中，总共发生了 7 次 Miss 和 1 次 Hit。</p>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul>
<li><strong>实现简单</strong>：只需要一个简单的队列结构即可实现，算法开销非常小。</li>
<li><strong>理解容易</strong>：逻辑清晰，易于理解和调试。</li>
</ul>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li><strong>性能不佳</strong>：完全不考虑数据的访问模式。一个经常被访问的热点数据，可能会因为进入 Cache 的时间比较早而被无情地替换出去，导致命中率低下。</li>
<li><strong>存在 Belady 异常</strong>：在某些情况下，增加 Cache 的容量反而可能导致命中率下降。这是 FIFO 算法一个著名的缺陷。</li>
</ul>
<hr>
<h3 id="2-最近最少使用算法-Least-Recently-Used-LRU"><a href="#2-最近最少使用算法-Least-Recently-Used-LRU" class="headerlink" title="2. 最近最少使用算法 (Least Recently Used, LRU)"></a>2. 最近最少使用算法 (Least Recently Used, LRU)</h3><h4 id="算法讲解-1"><a href="#算法讲解-1" class="headerlink" title="算法讲解"></a>算法讲解</h4><p>LRU 算法的核心思想是“如果一个数据在最近一段时间没有被访问到，那么它在将来被访问的可能性也很小”。因此，当需要替换时，LRU 会选择最长时间没有被访问过的数据块进行替换。这个算法基于“时间局部性”原理，即最近被访问的数据很可能在不久的将来再次被访问。</p>
<h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><p>同样，Cache 有 3 个槽位，请求序列为：</p>
<p>7, 0, 1, 2, 0, 3, 0, 4</p>
<table>
<thead>
<tr>
<th>请求页面</th>
<th>Cache 状态 (从最少使用到最近使用)</th>
<th>操作</th>
</tr>
</thead>
<tbody><tr>
<td><strong>7</strong></td>
<td><code>[7]</code></td>
<td>Miss, 7 进入</td>
</tr>
<tr>
<td><strong>0</strong></td>
<td><code>[7, 0]</code></td>
<td>Miss, 0 进入</td>
</tr>
<tr>
<td><strong>1</strong></td>
<td><code>[7, 0, 1]</code></td>
<td>Miss, 1 进入 (Cache 已满)</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td><code>[0, 1, 2]</code></td>
<td>Miss, 替换最久未使用的<strong>7</strong></td>
</tr>
<tr>
<td><strong>0</strong></td>
<td><code>[1, 2, 0]</code></td>
<td><strong>Hit</strong>, 0 变为最近使用</td>
</tr>
<tr>
<td><strong>3</strong></td>
<td><code>[2, 0, 3]</code></td>
<td>Miss, 替换最久未使用的<strong>1</strong></td>
</tr>
<tr>
<td><strong>0</strong></td>
<td><code>[2, 3, 0]</code></td>
<td><strong>Hit</strong>, 0 变为最近使用</td>
</tr>
<tr>
<td><strong>4</strong></td>
<td><code>[3, 0, 4]</code></td>
<td>Miss, 替换最久未使用的<strong>2</strong></td>
</tr>
</tbody></table>
<p>在这个例子中，总共发生了 6 次 Miss 和 2 次 Hit，性能优于 FIFO。</p>
<h4 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h4><ul>
<li><strong>性能好</strong>：充分利用了程序访问的“时间局部性”原理，在大多数场景下都有很高的命中率。</li>
<li><strong>没有 Belady 异常</strong>：增加 Cache 容量总会提高或保持原有的命中率。</li>
</ul>
<h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li><strong>实现复杂，开销大</strong>：需要跟踪记录每个数据块的访问历史。常见的实现方式是使用一个双向链表和哈希表的组合，每次访问都需要更新链表节点的位置，这在硬件和软件上都有较高的开销。</li>
</ul>
<hr>
<h3 id="3-最不经常使用算法-Least-Frequently-Used-LFU"><a href="#3-最不经常使用算法-Least-Frequently-Used-LFU" class="headerlink" title="3. 最不经常使用算法 (Least Frequently Used, LFU)"></a>3. 最不经常使用算法 (Least Frequently Used, LFU)</h3><h4 id="算法讲解-2"><a href="#算法讲解-2" class="headerlink" title="算法讲解"></a>算法讲解</h4><p>LFU 算法的核心思想是“<strong>如果一个数据在过去一段时间内被访问的次数很少，那么它在将来被访问的可能性也很小</strong>”。因此，当需要替换时，LFU 会选择被访问次数最少的数据块进行替换。如果存在多个访问次数相同的数据块，通常会结合 LRU 策略，替换其中最久未被访问的那个。</p>
<h4 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h4><p>假设 Cache 有 3 个槽位，请求序列为：</p>
<p>1, 2, 3, 1, 2, 4, 1, 2, 5</p>
<table>
<thead>
<tr>
<th>请求页面</th>
<th>Cache 状态 (页面:访问次数)</th>
<th>操作</th>
</tr>
</thead>
<tbody><tr>
<td><strong>1</strong></td>
<td><code>[(1:1)]</code></td>
<td>Miss</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td><code>[(1:1), (2:1)]</code></td>
<td>Miss</td>
</tr>
<tr>
<td><strong>3</strong></td>
<td><code>[(1:1), (2:1), (3:1)]</code></td>
<td>Miss (Cache 已满)</td>
</tr>
<tr>
<td><strong>1</strong></td>
<td><code>[(1:2), (2:1), (3:1)]</code></td>
<td><strong>Hit</strong>, 1 的计数增加</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td><code>[(1:2), (2:2), (3:1)]</code></td>
<td><strong>Hit</strong>, 2 的计数增加</td>
</tr>
<tr>
<td><strong>4</strong></td>
<td><code>[(1:2), (2:2), (4:1)]</code></td>
<td>Miss, 替换访问次数最少的<strong>3</strong></td>
</tr>
<tr>
<td><strong>1</strong></td>
<td><code>[(1:3), (2:2), (4:1)]</code></td>
<td><strong>Hit</strong>, 1 的计数增加</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td><code>[(1:3), (2:3), (4:1)]</code></td>
<td><strong>Hit</strong>, 2 的计数增加</td>
</tr>
<tr>
<td><strong>5</strong></td>
<td><code>[(1:3), (2:3), (5:1)]</code></td>
<td>Miss, 替换访问次数最少的<strong>4</strong></td>
</tr>
</tbody></table>
<h4 id="优点-2"><a href="#优点-2" class="headerlink" title="优点"></a>优点</h4><ul>
<li><strong>考虑了访问频率</strong>：对于那些具有稳定访问模式、某些数据被长期频繁访问的场景，LFU 的效果可能优于 LRU。</li>
</ul>
<h4 id="缺点-2"><a href="#缺点-2" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li><strong>实现更复杂</strong>：不仅要记录访问历史，还要维护每个数据块的访问计数值，通常需要使用堆或优先队列等数据结构，开销比 LRU 更大。</li>
<li><strong>无法适应访问模式的变化</strong>：一个曾经被高频访问但现在不再需要的数据，可能会因为其高计数值而长时间“污染”Cache，无法被及时替换出去。</li>
<li><strong>新加入的数据块容易被淘汰</strong>：一个新数据刚进入 Cache 时，其访问次数为 1，很容易在下一次替换中被立即淘汰，导致没有机会“成长”为热点数据。</li>
</ul>

      </div>
    </div>
  </div>

  <aside class="post-toc-container">
    <div class="post-toc-header">Directory</div>
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E7%AE%97%E6%B3%95%E6%B1%87%E6%80%BB"><span class="toc-text">替换算法汇总</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-Cache-%E6%9B%BF%E6%8D%A2%E7%AE%97%E6%B3%95%EF%BC%9F"><span class="toc-text">为什么需要 Cache 替换算法？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%85%88%E8%BF%9B%E5%85%88%E5%87%BA%E7%AE%97%E6%B3%95-First-In-First-Out-FIFO"><span class="toc-text">1. 先进先出算法 (First-In, First-Out, FIFO)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9C%80%E8%BF%91%E6%9C%80%E5%B0%91%E4%BD%BF%E7%94%A8%E7%AE%97%E6%B3%95-Least-Recently-Used-LRU"><span class="toc-text">2. 最近最少使用算法 (Least Recently Used, LRU)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%9C%80%E4%B8%8D%E7%BB%8F%E5%B8%B8%E4%BD%BF%E7%94%A8%E7%AE%97%E6%B3%95-Least-Frequently-Used-LFU"><span class="toc-text">3. 最不经常使用算法 (Least Frequently Used, LFU)</span></a></li></ol>
  </aside>
</div>


  <div class="post-nav" style="margin-top: 24px; display: flex; justify-content: space-between;">
    
      <a href="/2025/11/17/%E6%A0%91%E7%9A%84%E6%80%A7%E8%B4%A8/" class="prev">
        &laquo; 树的性质
      </a>
    
    
      <a href="/2025/09/03/Cache%E6%98%A0%E5%B0%84/" class="next">
        Cache映射 &raquo;
      </a>
    
  </div>


<script>
document.addEventListener('DOMContentLoaded', function() {
  const tocLinks = document.querySelectorAll('.toc-link');
  const headings = Array.from(document.querySelectorAll('.post-content h1, .post-content h2, .post-content h3'));

  if (tocLinks.length > 0 && headings.length > 0) {
    const observerOptions = {
      root: null,
      rootMargin: '-100px 0px -66% 0px',
      threshold: 0
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = entry.target.getAttribute('id');
          // Remove active class from all links
          tocLinks.forEach(link => link.classList.remove('active'));
          // Add active class to corresponding link
          const activeLink = document.querySelector(`.toc-link[href="#${id}"]`);
          if (activeLink) {
            activeLink.classList.add('active');
            // Optional: scroll TOC to active link if needed
          }
        }
      });
    }, observerOptions);

    headings.forEach(heading => observer.observe(heading));
  }
});
</script>

    </main>
  </div>
  
  <footer class="footer">
  <div class="footer-inner">
    
      &copy; 2026 Morris
    
    
    

    
    <br>
      
        Powered by <a href="https://lovelxh95.github.io/" target="_blank">Morris</a> | Theme - <a href="https://github.com/lovelxh95" target="_blank">gtihub_class</a>
      
    
  </div>
</footer>

  
  
  <button id="back-to-top" class="back-to-top" aria-label="Back to top">
    <svg class="octicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
      <path fill-rule="evenodd" d="M3.47 7.78a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 0l4.25 4.25a.75.75 0 01-1.06 1.06L9 4.81v7.44a.75.75 0 01-1.5 0V4.81L4.53 7.78a.75.75 0 01-1.06 0z"></path>
    </svg>
  </button>
  

  <script src="/js/copy-code.js"></script>
  
  <script src="/js/back-to-top.js"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
  <script src="/js/zoom.js"></script>
</body>
</html>
